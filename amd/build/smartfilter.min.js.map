{"version":3,"file":"smartfilter.min.js","sources":["../src/smartfilter.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TODO describe module smartfilter\n *\n * @module     block_learnerscript/smartfilter\n * @copyright  2023 Moodle India\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n        'block_learnerscript/ajax',\n        'block_learnerscript/reportwidget',\n        'block_learnerscript/report',\n        'block_learnerscript/flatpickr',\n        'block_learnerscript/config',\n        'block_learnerscript/serialize',\n        'core/str'],\n    function($, ajax, reportwidget, report, flatpickr, cfgs, serialize, str) {\n        var BasicparamUser = $('.basicparamsform #id_filter_users');\n        var BasicparamActivity = $('.basicparamsform #id_filter_activities');\n\n        var FilterUser = $('.filterform #id_filter_users');\n        var FilterActivity = $('.filterform #id_filter_activities');\n\n        var selectduration = $('.durationfilter');\n        var reportcontenttype = $('.reportcontenttype');\n\n        var smartfilter = {\n            SelectDuration: function() {\n                var self=this;\n                selectduration.on('click', function(e){\n                    e.stopImmediatePropagation();\n                    var instanceid = $(this).data('blockinstance');\n                    var reportid = $(this).data('reportid');\n                    var reporttype = $(this).data('reporttype');\n                    var duration = $(this).data('duration');\n                    self.DurationFilter(duration,'true',reportid,instanceid, reporttype);\n                   if($('#reportcontainer'+instanceid).html().length > 0 ){\n                        $('#plotreportcontainer'+instanceid).data('reporttype',reporttype);\n                    }else{\n                        $('#reportcontainer'+instanceid).data('reporttype',reporttype);\n                    }\n                    $('#datefilter'+instanceid).trigger('click');\n\n                });\n            },\n            ReportContenttypes: function() {\n                reportcontenttype.on('click', function(e){\n                    e.stopImmediatePropagation();\n                    $('.navbar-collapse').collapse('hide');\n                    var instanceid = $(this).data('blockinstance');\n                    var reportid = $(this).data('reportid');\n                    var reporttype = $(this).data('reporttype');\n                    require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                    reportwidget.CreateDashboardwidget({reporttype: reporttype, container:'#reporttype_'+instanceid,\n                                                    reportid:reportid, instanceid:instanceid,reportdashboard:1,\n                                                    selectreport: true});\n                });\n                    if($('#reportcontainer'+instanceid).html().length > 0 ){\n                        $('#plotreportcontainer'+instanceid).data('reporttype',reporttype);\n                    }else{\n                        $('#reportcontainer'+instanceid).data('reporttype',reporttype);\n                    }\n                    $('#reportcontenttypes'+instanceid).trigger('click');\n                });\n            },\n            DurationFilter: function(value, reportdashboard, report1id=null, instanceid=null, reportcontenttype=null) {\n                var today = new Date();\n                var start_duration = '';\n                if (reportdashboard == false) {\n                    instanceid = '';\n                }\n                if (value !== 'clear') {\n                    $('#lsfenddate'+instanceid).val(today.getTime() / 1000);\n                    switch (value) {\n                        case 'week':\n                            start_duration = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);\n                            break;\n                        case 'month':\n                            start_duration = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());\n                            break;\n                        case 'year':\n                            start_duration = new Date(today.getFullYear() - 1, today.getMonth(), today.getDate());\n                            break;\n                        case 'custom':\n                            var reportid = $('input[name=\"reportid\"]').val();\n                            $('#customrange'+instanceid).show();\n                            /**\n                            * Duration Filter\n                            */\n                            flatpickr('#customrange'+instanceid,{\n                                mode: 'range',\n                                onOpen: function(selectedDates, dateStr,instance){\n                                    instance.clear();\n                                },\n                                onClose: function(selectedDates, dateStr) {\n                                    $('#lsfstartdate'+instanceid).val(selectedDates[0].getTime() / 1000);\n                                    $('#lsfenddate'+instanceid).val((selectedDates[1].getTime() / 1000) + (60 * 60 * 24));\n                                    if (reportdashboard == false) {\n                                        require(['block_learnerscript/report'], function(report) {\n                                            report.CreateReportPage({ reportid: reportid, instanceid: instanceid,\n                                                reportdashboard: reportdashboard });\n                                        });\n                                    } else {\n                                        require(['block_learnerscript/report'], function(report) {\n                                            report.CreateReportPage({ reportid: report1id, instanceid: instanceid,\n                                                reportdashboard: reportdashboard });\n                                        });\n                                    }\n\n                                    $(\"#durtiontext\"+instanceid).text(dateStr);\n\n                            }\n                        });\n                            break;\n                        default:\n                            $('#lsfstartdate'+instanceid).val(0);\n                            break;\n                    }\n                    if (start_duration != '') {\n                        $('#lsfstartdate'+instanceid).val(start_duration.getTime() / 1000);\n                    }\n                } else {\n                    $('#lsfenddate'+instanceid).val(\"\");\n                    $('#lsfstartdate'+instanceid).val(\"\");\n                }\n                if (value !== 'custom') {\n                    if (reportdashboard != false) {\n                        require(['block_learnerscript/reportwidget'], function(reportwidget) {\n                               reportwidget.CreateDashboardwidget({\n                                reportid: report1id,\n                                reporttype: reportcontenttype,\n                                instanceid: instanceid\n                            });\n                        });\n                        str.get_string(value, 'block_reportdashboard').then(function(s) {\n                            $(\"#durtiontext\"+instanceid).text(s);\n                        });\n\n                    } else {\n                        var reportid = $('input[name=\"reportid\"]').val();\n                        require(['block_learnerscript/report'], function(report) {\n                            report.CreateReportPage({ reportid: reportid, instanceid: reportid, reportdashboard: reportdashboard });\n                        });\n                    }\n                    $('#customrange'+instanceid).val(\"\");\n                    $('#customrange'+instanceid).hide();\n                }\n                if (reportdashboard != true) {\n                    var reportid = $('input[name=\"reportid\"]').val();\n                    $('.plotgraphcontainer').removeClass('show').addClass('hide');\n                    $('#plotreportcontainer' + reportid).html('');\n                }\n\n            },\n            /**\n             * [FilterData description]\n             * @param {[type]} reportinstance [description]\n             */\n            FilterData: function(reportinstance) {\n                var reportfilter = $(\".filterform\" + reportinstance).serializeObject();\n                 $.urlParam = function(name) {\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n                    if (results === null || results == ' ') {\n                       return null;\n                    } else {\n                       return results[1] || 0;\n                    }\n                };\n                return reportfilter;\n            },\n            BasicparamsData: function(reportinstance) {\n                var basicparams = $(\".basicparamsform\" + reportinstance).serializeObject();\n                return basicparams;\n            },\n            CourseData: function(args) {\n                var FirstElementActive = false;\n                if (BasicparamActivity.length > 0 || FilterActivity.length > 0) {\n                    if (BasicparamActivity.length > 0) {\n                        FirstElementActive = true;\n                    }\n                    if (args.courseid > 0) {\n                        this.CourseActivities({courseid: args.courseid,\n                            firstelementactive: FirstElementActive, activityid: args.filterrequests.filter_activities});\n                    }\n                }\n                if (BasicparamUser.length > 0 || FilterUser.length > 0) {\n                    if (BasicparamUser.length > 0) {\n                        FirstElementActive = true;\n                    }\n                }\n            },\n           categoryCourses: function(args) {\n            var currentcategory = $('#id_filter_coursecategories').find(\":selected\").val();\n            if (currentcategory > 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'categorycourses',\n                        basicparam: true,\n                        reporttype: args.reporttype,\n                        categoryid: args.categoryid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        template += '<option value = ' + key + '>' + value + '</option>';\n                    });\n                    $(\"#id_filter_courses\").html(template);\n                });\n            }\n        },\n        CourseActivities: function(args) {\n            var currentcourse = $('#id_filter_courses').find(\":selected\").val();\n            var requestedactivityid = args.activityid;\n            if (currentcourse > 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'courseactivities',\n                        basicparam: true,\n                        courseid: args.courseid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        var selected = '';\n                            if (key == requestedactivityid) {\n                                selected = 'selected';\n                            }\n                            template += '<option value = ' + key + ' ' + selected + ' >' + value + '</option>';\n                    });\n                    $(\"#id_filter_activities\").html(template);\n                    var currentactivity = $('.basicparamsform #id_filter_activities').find(\":selected\").val();\n                    if (currentactivity == 0 || currentactivity === null) {\n                    $('.basicparamsform #id_filter_activities').val($('.basicparamsform #id_filter_activities option:eq(1)').val());\n                    }\n                    $(\"#id_filter_activities\").trigger('change');\n                });\n            }\n        },\n        UserCourses: function(args) {\n            var currentcourse = $('#id_filter_courses').find(\":selected\").val();\n            $('#id_filter_courses').find('option')\n                .remove()\n                .end()\n                .append('<option value=\"\">Select Course</option>');\n            if (args.userid >= 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'usercourses',\n                        basicparam: true,\n                        userid: args.userid,\n                        reporttype: args.reporttype,\n                        reportid: args.reportid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    $.each(response, function(key, value) {\n                        if(key == 0){\n                            return true;\n                        }\n                        if ((key == Object.keys(response)[0] && args.firstelementactive == 1) ||\n                                (key == currentcourse && args.firstelementactive == 1)) {\n                            $('#id_filter_courses').append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .attr('selected', 'selected')\n                                .text(value));\n                            if(typeof args.triggercourseactivities != 'undefined' && args.triggercourseactivities == true){\n                                smartfilter.CourseActivities({ courseid: key });\n                            }\n                        } else {\n                            $('#id_filter_courses').append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .text(value));\n                        }\n                    });\n\n                });\n            }\n        },\n        EnrolledUsers: function(args) {\n            var nearelement = args.element || $('#id_filter_users');\n            var currentuser = nearelement.val();\n            nearelement.find('option')\n                .remove()\n                .end()\n                .append('<option value=\"\">Select User</option>');\n                var promise = ajax.call({\n                    args: {\n                        action: 'enrolledusers',\n                        basicparam: true,\n                        reportid: args.reportid,\n                        courseid: args.courseid,\n                        reporttype: args.reporttype,\n                        component: args.components\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    // if (typeof nearelement == 'undefined') {\n                    //     nearelement.find('option')\n                    //         .not(':eq(0), :selected')\n                    //         .remove()\n                    //         .end();\n                    // }\n                    $.each(response, function(key, value) {\n                        if(key == 0){\n                            return true;\n                        }\n                        if (key != currentuser) {\n                            nearelement.append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .text(value));\n                        } else {\n                            nearelement.append($(\"<option></option>\")\n                                .attr(\"value\", key)\n                                .attr('selected', 'selected')\n                                .text(value));\n                        }\n                    });\n                    if (!response.hasOwnProperty(currentuser)) {\n                        // nearelement.select2('destroy').select2({ theme: 'classic' });\n                        // nearelement.select2('val', 0);\n                    } else {\n                        nearelement.select2('val', \"\");\n                        var basicparamuserlen = nearelement.parents('.basicparamsform').length;\n                        if (basicparamuserlen > 0 && args.onloadtrigger) {\n                            $(\".basicparamsform #id_filter_apply\").trigger('click');\n                        }\n                    }\n                });\n\n        },\n        CohortUsers: function(args) {\n            var currentcohort = $('#id_filter_cohort').find(\":selected\").val();\n            if (currentcohort > 0) {\n                var promise = ajax.call({\n                    args: {\n                        action: 'cohortusers',\n                        basicparam: true,\n                        reporttype: args.reporttype,\n                        categoryid: args.cohortid\n                    },\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\n                });\n                promise.done(function(response) {\n                    var template = '';\n                    $.each(response, function(key, value) {\n                        template += '<option value = ' + key + '>' + value + '</option>';\n                    });\n                    $(\"#id_filter_users\").html(template);\n                });\n            }\n        }\n        };\n        return smartfilter;\n    });\n"],"names":["define","$","ajax","reportwidget","report","flatpickr","cfgs","serialize","str","BasicparamUser","BasicparamActivity","FilterUser","FilterActivity","selectduration","reportcontenttype","smartfilter","SelectDuration","self","this","on","e","stopImmediatePropagation","instanceid","data","reportid","reporttype","duration","DurationFilter","html","length","trigger","ReportContenttypes","collapse","require","CreateDashboardwidget","container","reportdashboard","selectreport","value","report1id","arguments","undefined","today","Date","start_duration","val","getTime","getFullYear","getMonth","getDate","show","mode","onOpen","selectedDates","dateStr","instance","clear","onClose","CreateReportPage","text","get_string","then","s","hide","removeClass","addClass","FilterData","reportinstance","reportfilter","serializeObject","urlParam","name","results","RegExp","exec","window","location","href","BasicparamsData","CourseData","args","FirstElementActive","courseid","CourseActivities","firstelementactive","activityid","filterrequests","filter_activities","categoryCourses","find","call","action","basicparam","categoryid","url","M","cfg","wwwroot","done","response","template","each","key","currentcourse","requestedactivityid","selected","currentactivity","UserCourses","remove","end","append","userid","Object","keys","attr","triggercourseactivities","EnrolledUsers","nearelement","element","currentuser","component","components","hasOwnProperty","select2","parents","onloadtrigger","CohortUsers","cohortid"],"mappings":"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"}