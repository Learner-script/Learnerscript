{"version":3,"file":"dataTables.fixedHeader.min.js","sources":["../src/dataTables.fixedHeader.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/* ! FixedHeader 3.4.0\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\n(function(factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(['jquery', 'block_learnerscript/datatables'], function($) {\n            return factory($, window, document);\n        });\n    } else if (typeof exports === 'object') {\n        // CommonJS\n        var jq = require('jquery');\n        var cjsRequires = function(root, $) {\n            if (!$.fn.dataTable) {\n                require('block_learnerscript/datatables')(root, $);\n            }\n        };\n        var module;\n        if (typeof window === 'undefined') {\n            module.exports = function(root, $) {\n                if (!root) {\n                    // CommonJS environments without a window global must pass a\n                    // root. This will give an error otherwise\n                    root = window;\n                }\n\n                if (!$) {\n                    $ = jq(root);\n                }\n\n                cjsRequires(root, $);\n                return factory($, root, root.document);\n            };\n        } else {\n            cjsRequires(window, jq);\n            module.exports = factory(jq, window, window.document);\n        }\n    } else {\n        // Browser\n        var jQuery;\n        factory(jQuery, window, document);\n    }\n}(function($, window, document, undefined) {\n'use strict';\nvar DataTable = $.fn.dataTable;\n\n\n/**\n * @summary     FixedHeader\n * @description Fix a table's header or footer, so it is always visible while\n *              scrolling\n * @version     3.4.0\n * @author      SpryMedia Ltd (www.sprymedia.co.uk)\n * @contact     www.sprymedia.co.uk\n * @copyright   SpryMedia Ltd.\n *\n * This source file is free software, available under the following license:\n *   MIT license - http://datatables.net/license/mit\n *\n * This source file is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.\n *\n * For details please refer to: http://www.datatables.net\n */\n\nvar _instCounter = 0;\n\nvar FixedHeader = function(dt, config) {\n    // Sanity check - you just know it will happen\n    if (!(this instanceof FixedHeader)) {\n        throw \"FixedHeader must be initialised with the 'new' keyword.\";\n    }\n\n    // Allow a boolean true for defaults\n    if (config === true) {\n        config = {};\n    }\n\n    dt = new DataTable.Api(dt);\n\n    this.c = $.extend(true, {}, FixedHeader.defaults, config);\n\n    this.s = {\n        dt: dt,\n        position: {\n            theadTop: 0,\n            tbodyTop: 0,\n            tfootTop: 0,\n            tfootBottom: 0,\n            width: 0,\n            left: 0,\n            tfootHeight: 0,\n            theadHeight: 0,\n            windowHeight: $(window).height(),\n            visible: true\n        },\n        headerMode: null,\n        footerMode: null,\n        autoWidth: dt.settings()[0].oFeatures.bAutoWidth,\n        namespace: '.dtfc' + _instCounter++,\n        scrollLeft: {\n            header: -1,\n            footer: -1\n        },\n        enable: true,\n        autoDisable: false\n    };\n\n    this.dom = {\n        floatingHeader: null,\n        thead: $(dt.table().header()),\n        tbody: $(dt.table().body()),\n        tfoot: $(dt.table().footer()),\n        header: {\n            host: null,\n            floating: null,\n            floatingParent: $('<div class=\"dtfh-floatingparent\">'),\n            placeholder: null\n        },\n        footer: {\n            host: null,\n            floating: null,\n            floatingParent: $('<div class=\"dtfh-floatingparent\">'),\n            placeholder: null\n        }\n    };\n\n    this.dom.header.host = this.dom.thead.parent();\n    this.dom.footer.host = this.dom.tfoot.parent();\n\n    var dtSettings = dt.settings()[0];\n    if (dtSettings._fixedHeader) {\n        throw 'FixedHeader already initialised on table ' + dtSettings.nTable.id;\n    }\n\n    dtSettings._fixedHeader = this;\n\n    this._constructor();\n};\n\n/*\n * Variable: FixedHeader\n * Purpose:  Prototype for FixedHeader\n * Scope:    global\n */\n$.extend(FixedHeader.prototype, {\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n     * API methods\n     */\n\n    /**\n     * Kill off FH and any events\n     */\n    destroy: function() {\n        var dom = this.dom;\n\n        this.s.dt.off('.dtfc');\n        $(window).off(this.s.namespace);\n\n        // Remove clones of FC blockers\n        if (dom.header.rightBlocker) {\n            dom.header.rightBlocker.remove();\n        }\n        if (dom.header.leftBlocker) {\n            dom.header.leftBlocker.remove();\n        }\n        if (dom.footer.rightBlocker) {\n            dom.footer.rightBlocker.remove();\n        }\n        if (dom.footer.leftBlocker) {\n            dom.footer.leftBlocker.remove();\n        }\n\n        if (this.c.header) {\n            this._modeChange('in-place', 'header', true);\n        }\n\n        if (this.c.footer && dom.tfoot.length) {\n            this._modeChange('in-place', 'footer', true);\n        }\n    },\n\n    /**\n     * Enable / disable the fixed elements\n     *\n     * @param  {boolean} enable `true` to enable, `false` to disable\n     * @param {string} update\n     * @param {string} type\n     */\n    enable: function(enable, update, type) {\n        this.s.enable = enable;\n\n        this.s.enableType = type;\n\n        if (update || update === undefined) {\n            this._positions();\n            this._scroll(true);\n        }\n    },\n\n    /**\n     * Get enabled status\n     */\n    enabled: function() {\n        return this.s.enable;\n    },\n\n    /**\n     * Set header offset\n     *\n     * @param  {int} offset value for headerOffset\n     */\n    headerOffset: function(offset) {\n        if (offset !== undefined) {\n            this.c.headerOffset = offset;\n            this.update();\n        }\n\n        return this.c.headerOffset;\n    },\n\n    /**\n     * Set footer offset\n     *\n     * @param  {int} offset value for footerOffset\n     */\n    footerOffset: function(offset) {\n        if (offset !== undefined) {\n            this.c.footerOffset = offset;\n            this.update();\n        }\n\n        return this.c.footerOffset;\n    },\n\n    /**\n     * Recalculate the position of the fixed elements and force them into place\n     * @param {boolean} force\n     */\n    update: function(force) {\n        var table = this.s.dt.table().node();\n\n        // Update should only do something if enabled by the dev.\n        if (!this.s.enable && !this.s.autoDisable) {\n            return;\n        }\n\n        if ($(table).is(':visible')) {\n            this.s.autoDisable = false;\n            this.enable(true, false);\n        } else {\n            this.s.autoDisable = true;\n            this.enable(false, false);\n        }\n\n        // Don't update if header is not in the document atm (due to\n        // async events)\n        if ($(table).children('thead').length === 0) {\n            return;\n        }\n\n        this._positions();\n        this._scroll(force !== undefined ? force : true);\n    },\n\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n     * Constructor\n     */\n\n    /**\n     * FixedHeader constructor - adding the required event listeners and\n     * simple initialisation\n     *\n     * @private\n     */\n    _constructor: function() {\n        var that = this;\n        var dt = this.s.dt;\n\n        $(window)\n            .on('scroll' + this.s.namespace, function() {\n                that._scroll();\n            })\n            .on(\n                'resize' + this.s.namespace,\n                DataTable.util.throttle(function() {\n                    that.s.position.windowHeight = $(window).height();\n                    that.update();\n                }, 50)\n            );\n\n        var autoHeader = $('.fh-fixedHeader');\n        if (!this.c.headerOffset && autoHeader.length) {\n            this.c.headerOffset = autoHeader.outerHeight();\n        }\n\n        var autoFooter = $('.fh-fixedFooter');\n        if (!this.c.footerOffset && autoFooter.length) {\n            this.c.footerOffset = autoFooter.outerHeight();\n        }\n\n        dt.on(\n            'column-reorder.dt.dtfc column-visibility.dt.dtfc column-sizing.dt.dtfc responsive-display.dt.dtfc',\n            function() {\n                that.update();\n            }\n        ).on('draw.dt.dtfc', function(e, ctx) {\n            // For updates from our own table, don't reclone, but for all others, do\n            that.update(ctx === dt.settings()[0] ? false : true);\n        });\n\n        dt.on('destroy.dtfc', function() {\n            that.destroy();\n        });\n\n        this._positions();\n        this._scroll();\n    },\n\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n     * Private methods\n     */\n\n    /**\n     * Clone a fixed item to act as a place holder for the original element\n     * which is moved into a clone of the table element, and moved around the\n     * document to give the fixed effect.\n     *\n     * @param  {string}  item  'header' or 'footer'\n     * @param  {boolean} force Force the clone to happen, or allow automatic\n     *   decision (reuse existing if available)\n     * @private\n     */\n    _clone: function(item, force) {\n        var that = this;\n        var dt = this.s.dt;\n        var itemDom = this.dom[item];\n        var itemElement = item === 'header' ? this.dom.thead : this.dom.tfoot;\n\n        // If footer and scrolling is enabled then we don't clone\n        // Instead the table's height is decreased accordingly - see `_scroll()`\n        if (item === 'footer' && this._scrollEnabled()) {\n            return;\n        }\n\n        if (!force && itemDom.floating) {\n            // Existing floating element - reuse it\n            itemDom.floating.removeClass('fixedHeader-floating fixedHeader-locked');\n        } else {\n            if (itemDom.floating) {\n                if (itemDom.placeholder !== null) {\n                    itemDom.placeholder.remove();\n                }\n                this._unsize(item);\n                itemDom.floating.children().detach();\n                itemDom.floating.remove();\n            }\n\n            var tableNode = $(dt.table().node());\n            var scrollBody = $(tableNode.parent());\n            var scrollEnabled = this._scrollEnabled();\n\n            itemDom.floating = $(dt.table().node().cloneNode(false))\n                .attr('aria-hidden', 'true')\n                .css({\n                    'table-layout': 'fixed',\n                    top: 0,\n                    left: 0\n                })\n                .removeAttr('id')\n                .append(itemElement);\n\n            itemDom.floatingParent\n                .css({\n                    width: scrollBody.width(),\n                    overflow: 'hidden',\n                    height: 'fit-content',\n                    position: 'fixed',\n                    left: scrollEnabled ? tableNode.offset().left + scrollBody.scrollLeft() : 0\n                })\n                .css(\n                    item === 'header'\n                        ? {\n                                top: this.c.headerOffset,\n                                bottom: ''\n                          }\n                        : {\n                                top: '',\n                                bottom: this.c.footerOffset\n                          }\n                )\n                .addClass(item === 'footer' ? 'dtfh-floatingparentfoot' : 'dtfh-floatingparenthead')\n                .append(itemDom.floating)\n                .appendTo('body');\n\n            this._stickyPosition(itemDom.floating, '-');\n\n            var scrollLeftUpdate = function() {\n                var scrollLeft = scrollBody.scrollLeft();\n                that.s.scrollLeft = {footer: scrollLeft, header: scrollLeft};\n                itemDom.floatingParent.scrollLeft(that.s.scrollLeft.header);\n            };\n\n            scrollLeftUpdate();\n            scrollBody.off('scroll.dtfh').on('scroll.dtfh', scrollLeftUpdate);\n\n            // Insert a fake thead/tfoot into the DataTable to stop it jumping around\n            itemDom.placeholder = itemElement.clone(false);\n            itemDom.placeholder.find('*[id]').removeAttr('id');\n\n            itemDom.host.prepend(itemDom.placeholder);\n\n            // Clone widths\n            this._matchWidths(itemDom.placeholder, itemDom.floating);\n        }\n    },\n\n    /**\n     * This method sets the sticky position of the header elements to match fixed columns\n     * @param {JQuery<HTMLElement>} el\n     * @param {string} sign\n     */\n    _stickyPosition: function(el, sign) {\n        if (this._scrollEnabled()) {\n            var that = this;\n            var rtl = $(that.s.dt.table().node()).css('direction') === 'rtl';\n\n            el.find('th').each(function() {\n                // Find out if fixed header has previously set this column\n                if ($(this).css('position') === 'sticky') {\n                    var right = $(this).css('right');\n                    var left = $(this).css('left');\n                    if (right !== 'auto' && !rtl) {\n                        // New position either adds or dismisses the barWidth\n                        var potential =\n                            +right.replace(/px/g, '') +\n                            (sign === '-' ? -1 : 1) * that.s.dt.settings()[0].oBrowser.barWidth;\n                        $(this).css('right', potential > 0 ? potential : 0);\n                    } else if (left !== 'auto' && rtl) {\n                        var potential =\n                            +left.replace(/px/g, '') +\n                            (sign === '-' ? -1 : 1) * that.s.dt.settings()[0].oBrowser.barWidth;\n                        $(this).css('left', potential > 0 ? potential : 0);\n                    }\n                }\n            });\n        }\n    },\n\n    /**\n     * Copy widths from the cells in one element to another. This is required\n     * for the footer as the footer in the main table takes its sizes from the\n     * header columns. That isn't present in the footer so to have it still\n     * align correctly, the sizes need to be copied over. It is also required\n     * for the header when auto width is not enabled\n     *\n     * @param  {jQuery} from Copy widths from\n     * @param  {jQuery} to   Copy widths to\n     * @private\n     */\n    _matchWidths: function(from, to) {\n        var get = function(name) {\n            return $(name, from)\n                .map(function() {\n                    return (\n                        $(this)\n                            .css('width')\n                            .replace(/[^\\d\\\\.]/g, '') * 1\n                    );\n                })\n                .toArray();\n        };\n\n        var set = function(name, toWidths) {\n            $(name, to).each(function(i) {\n                $(this).css({\n                    width: toWidths[i],\n                    minWidth: toWidths[i]\n                });\n            });\n        };\n\n        var thWidths = get('th');\n        var tdWidths = get('td');\n\n        set('th', thWidths);\n        set('td', tdWidths);\n    },\n\n    /**\n     * Remove assigned widths from the cells in an element. This is required\n     * when inserting the footer back into the main table so the size is defined\n     * by the header columns and also when auto width is disabled in the\n     * DataTable.\n     *\n     * @param  {string} item The `header` or `footer`\n     * @private\n     */\n    _unsize: function(item) {\n        var el = this.dom[item].floating;\n\n        if (el && (item === 'footer' || (item === 'header' && !this.s.autoWidth))) {\n            $('th, td', el).css({\n                width: '',\n                minWidth: ''\n            });\n        } else if (el && item === 'header') {\n            $('th, td', el).css('min-width', '');\n        }\n    },\n\n    /**\n     * Reposition the floating elements to take account of horizontal page\n     * scroll\n     *\n     * @param  {string} item       The `header` or `footer`\n     * @param  {int}    scrollLeft Document scrollLeft\n     * @private\n     */\n    _horizontal: function(item, scrollLeft) {\n        var itemDom = this.dom[item];\n        var lastScrollLeft = this.s.scrollLeft;\n\n        if (itemDom.floating && lastScrollLeft[item] !== scrollLeft) {\n            // If scrolling is enabled we need to match the floating header to the body\n            if (this._scrollEnabled()) {\n                var newScrollLeft = $($(this.s.dt.table().node()).parent()).scrollLeft();\n                itemDom.floating.scrollLeft(newScrollLeft);\n                itemDom.floatingParent.scrollLeft(newScrollLeft);\n            }\n\n            lastScrollLeft[item] = scrollLeft;\n        }\n    },\n\n    /**\n     * Change from one display mode to another. Each fixed item can be in one\n     * of:\n     *\n     * * `in-place` - In the main DataTable\n     * * `in` - Floating over the DataTable\n     * * `below` - (Header only) Fixed to the bottom of the table body\n     * * `above` - (Footer only) Fixed to the top of the table body\n     *\n     * @param  {string}  mode        Mode that the item should be shown in\n     * @param  {string}  item        'header' or 'footer'\n     * @param  {boolean} forceChange Force a redraw of the mode, even if already\n     *     in that mode.\n     * @private\n     */\n    _modeChange: function(mode, item, forceChange) {\n        var itemDom = this.dom[item];\n        var position = this.s.position;\n\n        // Just determine if scroll is enabled once\n        var scrollEnabled = this._scrollEnabled();\n\n        // If footer and scrolling is enabled then we don't clone\n        // Instead the table's height is decreased accordingly - see `_scroll()`\n        if (item === 'footer' && scrollEnabled) {\n            return;\n        }\n\n        // It isn't trivial to add a !important css attribute...\n        var importantWidth = function(w) {\n            itemDom.floating.attr('style', function(i, s) {\n                return (s || '') + 'width: ' + w + 'px !important;';\n            });\n\n            // If not scrolling also have to update the floatingParent\n            if (!scrollEnabled) {\n                itemDom.floatingParent.attr('style', function(i, s) {\n                    return (s || '') + 'width: ' + w + 'px !important;';\n                });\n            }\n        };\n\n        // Record focus. Browser's will cause input elements to loose focus if\n        // they are inserted else where in the doc\n        var tablePart = this.dom[item === 'footer' ? 'tfoot' : 'thead'];\n        var focus = $.contains(tablePart[0], document.activeElement)\n            ? document.activeElement\n            : null;\n        var scrollBody = $($(this.s.dt.table().node()).parent());\n\n        if (mode === 'in-place') {\n            // Insert the header back into the table's real header\n            if (itemDom.placeholder) {\n                itemDom.placeholder.remove();\n                itemDom.placeholder = null;\n            }\n\n            this._unsize(item);\n\n            if (item === 'header') {\n                itemDom.host.prepend(tablePart);\n            } else {\n                itemDom.host.append(tablePart);\n            }\n\n            if (itemDom.floating) {\n                itemDom.floating.remove();\n                itemDom.floating = null;\n                this._stickyPosition(itemDom.host, '+');\n            }\n\n            if (itemDom.floatingParent) {\n                itemDom.floatingParent.remove();\n            }\n\n            $($(itemDom.host.parent()).parent()).scrollLeft(scrollBody.scrollLeft());\n        } else if (mode === 'in') {\n            // Remove the header from the read header and insert into a fixed\n            // positioned floating table clone\n            this._clone(item, forceChange);\n\n            // Get useful position values\n            var scrollOffset = scrollBody.offset();\n            var windowTop = $(document).scrollTop();\n            var windowHeight = $(window).height();\n            var windowBottom = windowTop + windowHeight;\n            var bodyTop = scrollEnabled ? scrollOffset.top : position.tbodyTop;\n            var bodyBottom = scrollEnabled\n                ? scrollOffset.top + scrollBody.outerHeight()\n                : position.tfootTop;\n\n            // Calculate the amount that the footer or header needs to be shuffled\n            var shuffle =\n                item === 'footer'\n                    ? // Footer and top of body isn't on screen\n                      bodyTop > windowBottom\n                        ? // Yes - push the footer below\n                          position.tfootHeight\n                        : // No - bottom set to the gap between the top of the body and the bottom of the window\n                          bodyTop + position.tfootHeight - windowBottom\n                    : // Otherwise must be a header so get the difference from the bottom of the\n                      //  desired floating header and the bottom of the table body\n                      windowTop + this.c.headerOffset + position.theadHeight - bodyBottom;\n\n            // Set the top or bottom based off of the offset and the shuffle value\n            var prop = item === 'header' ? 'top' : 'bottom';\n            var val = this.c[item + 'Offset'] - (shuffle > 0 ? shuffle : 0);\n\n            itemDom.floating.addClass('fixedHeader-floating');\n            itemDom.floatingParent\n                .css(prop, val)\n                .css({\n                    left: position.left,\n                    height: item === 'header' ? position.theadHeight : position.tfootHeight,\n                    'z-index': 2\n                })\n                .append(itemDom.floating);\n\n            importantWidth(position.width);\n\n            if (item === 'footer') {\n                itemDom.floating.css('top', '');\n            }\n        } else if (mode === 'below') {\n            // Only used for the header\n            // Fix the position of the floating header at base of the table body\n            this._clone(item, forceChange);\n\n            itemDom.floating.addClass('fixedHeader-locked');\n            itemDom.floatingParent.css({\n                position: 'absolute',\n                top: position.tfootTop - position.theadHeight,\n                left: position.left + 'px'\n            });\n\n            importantWidth(position.width);\n        } else if (mode === 'above') {\n            // Only used for the footer\n            // Fix the position of the floating footer at top of the table body\n            this._clone(item, forceChange);\n\n            itemDom.floating.addClass('fixedHeader-locked');\n            itemDom.floatingParent.css({\n                position: 'absolute',\n                top: position.tbodyTop,\n                left: position.left + 'px'\n            });\n\n            importantWidth(position.width);\n        }\n\n        // Restore focus if it was lost\n        if (focus && focus !== document.activeElement) {\n            setTimeout(function() {\n                focus.focus();\n            }, 10);\n        }\n\n        this.s.scrollLeft.header = -1;\n        this.s.scrollLeft.footer = -1;\n        this.s[item + 'Mode'] = mode;\n    },\n\n    /**\n     * Cache the positional information that is required for the mode\n     * calculations that FixedHeader performs.\n     *\n     * @private\n     */\n    _positions: function() {\n        var dt = this.s.dt;\n        var table = dt.table();\n        var position = this.s.position;\n        var dom = this.dom;\n        var tableNode = $(table.node());\n        var scrollEnabled = this._scrollEnabled();\n\n        // Need to use the header and footer that are in the main table,\n        // regardless of if they are clones, since they hold the positions we\n        // want to measure from\n        var thead = $(dt.table().header());\n        var tfoot = $(dt.table().footer());\n        var tbody = dom.tbody;\n        var scrollBody = tableNode.parent();\n\n        position.visible = tableNode.is(':visible');\n        position.width = tableNode.outerWidth();\n        position.left = tableNode.offset().left;\n        position.theadTop = thead.offset().top;\n        position.tbodyTop = scrollEnabled ? scrollBody.offset().top : tbody.offset().top;\n        position.tbodyHeight = scrollEnabled ? scrollBody.outerHeight() : tbody.outerHeight();\n        position.theadHeight = thead.outerHeight();\n        position.theadBottom = position.theadTop + position.theadHeight;\n\n        if (tfoot.length) {\n            position.tfootTop = position.tbodyTop + position.tbodyHeight; // Tfoot.offset().top;\n            position.tfootBottom = position.tfootTop + tfoot.outerHeight();\n            position.tfootHeight = tfoot.outerHeight();\n        } else {\n            position.tfootTop = position.tbodyTop + tbody.outerHeight();\n            position.tfootBottom = position.tfootTop;\n            position.tfootHeight = position.tfootTop;\n        }\n    },\n\n    /**\n     * Mode calculation - determine what mode the fixed items should be placed\n     * into.\n     *\n     * @param  {boolean} forceChange Force a redraw of the mode, even if already\n     *     in that mode.\n     * @private\n     */\n    _scroll: function(forceChange) {\n        if (this.s.dt.settings()[0].bDestroying) {\n            return;\n        }\n\n        // ScrollBody details\n        var scrollEnabled = this._scrollEnabled();\n        var scrollBody = $(this.s.dt.table().node()).parent();\n        var scrollOffset = scrollBody.offset();\n        var scrollHeight = scrollBody.outerHeight();\n\n        // Window details\n        var windowLeft = $(document).scrollLeft();\n        var windowTop = $(document).scrollTop();\n        var windowHeight = $(window).height();\n        var windowBottom = windowHeight + windowTop;\n\n        var position = this.s.position;\n        var headerMode, footerMode;\n\n        // Body Details\n        var bodyTop = scrollEnabled ? scrollOffset.top : position.tbodyTop;\n        var bodyLeft = scrollEnabled ? scrollOffset.left : position.left;\n        var bodyBottom = scrollEnabled ? scrollOffset.top + scrollHeight : position.tfootTop;\n        var bodyWidth = scrollEnabled ? scrollBody.outerWidth() : position.tbodyWidth;\n\n        var windowBottom = windowTop + windowHeight;\n\n        if (this.c.header) {\n            if (!this.s.enable) {\n                headerMode = 'in-place';\n            }\n            // The header is in it's normal place if the body top is lower than\n            //  the scroll of the window plus the headerOffset and the height of the header\n            else if (\n                !position.visible ||\n                windowTop + this.c.headerOffset + position.theadHeight <= bodyTop\n            ) {\n                headerMode = 'in-place';\n            }\n            // The header should be floated if\n            else if (\n                // The scrolling plus the header offset plus the height of the header is lower than the top of the body\n                windowTop + this.c.headerOffset + position.theadHeight > bodyTop &&\n                // And the scrolling at the top plus the header offset is above the bottom of the body\n                windowTop + this.c.headerOffset + position.theadHeight < bodyBottom\n            ) {\n                headerMode = 'in';\n                var scrollBody = $($(this.s.dt.table().node()).parent());\n\n                // Further to the above, If the scrolling plus the header offset plus the header height is lower\n                // than the bottom of the table a shuffle is required so have to force the calculation\n                if (\n                    windowTop + this.c.headerOffset + position.theadHeight > bodyBottom ||\n                    this.dom.header.floatingParent === undefined\n                ) {\n                    forceChange = true;\n                } else {\n                    this.dom.header.floatingParent\n                        .css({\n                            top: this.c.headerOffset,\n                            position: 'fixed'\n                        })\n                        .append(this.dom.header.floating);\n                }\n            }\n            // Anything else and the view is below the table\n            else {\n                headerMode = 'below';\n            }\n\n            if (forceChange || headerMode !== this.s.headerMode) {\n                this._modeChange(headerMode, 'header', forceChange);\n            }\n\n            this._horizontal('header', windowLeft);\n        }\n\n        var header = {\n            offset: {top: 0, left: 0},\n            height: 0\n        };\n        var footer = {\n            offset: {top: 0, left: 0},\n            height: 0\n        };\n\n        if (this.c.footer && this.dom.tfoot.length) {\n            if (!this.s.enable) {\n                footerMode = 'in-place';\n            } else if (\n                !position.visible ||\n                position.tfootBottom + this.c.footerOffset <= windowBottom\n            ) {\n                footerMode = 'in-place';\n            } else if (\n                bodyBottom + position.tfootHeight + this.c.footerOffset > windowBottom &&\n                bodyTop + this.c.footerOffset < windowBottom\n            ) {\n                footerMode = 'in';\n                forceChange = true;\n            } else {\n                footerMode = 'above';\n            }\n\n            if (forceChange || footerMode !== this.s.footerMode) {\n                this._modeChange(footerMode, 'footer', forceChange);\n            }\n\n            this._horizontal('footer', windowLeft);\n\n            var getOffsetHeight = function(el) {\n                return {\n                    offset: el.offset(),\n                    height: el.outerHeight()\n                };\n            };\n\n            header = this.dom.header.floating\n                ? getOffsetHeight(this.dom.header.floating)\n                : getOffsetHeight(this.dom.thead);\n            footer = this.dom.footer.floating\n                ? getOffsetHeight(this.dom.footer.floating)\n                : getOffsetHeight(this.dom.tfoot);\n\n            // If scrolling is enabled and the footer is off the screen\n            if (scrollEnabled && footer.offset.top > windowTop) {\n                // && footer.offset.top >= windowBottom) {\n                // Calculate the gap between the top of the scrollBody and the top of the window\n                var overlap = windowTop - scrollOffset.top;\n                // The new height is the bottom of the window\n                var newHeight =\n                    windowBottom +\n                    // If the gap between the top of the scrollbody and the window is more than\n                    //  the height of the header then the top of the table is still visible so add that gap\n                    // Doing this has effectively calculated the height from the top of the table to the bottom of the current page\n                    (overlap > -header.height ? overlap : 0) -\n                    // Take from that\n                    // The top of the header plus\n                    (header.offset.top +\n                        // The header height if the standard header is present\n                        (overlap < -header.height ? header.height : 0) +\n                        // And the height of the footer\n                        footer.height);\n\n                // Don't want a negative height\n                if (newHeight < 0) {\n                    newHeight = 0;\n                }\n\n                // At the end of the above calculation the space between the header (top of the page if floating)\n                // and the point just above the footer should be the new value for the height of the table.\n                scrollBody.outerHeight(newHeight);\n\n                // Need some rounding here as sometimes very small decimal places are encountered\n                // If the actual height is bigger or equal to the height we just applied then the footer is \"Floating\"\n                if (Math.round(scrollBody.outerHeight()) >= Math.round(newHeight)) {\n                    $(this.dom.tfoot.parent()).addClass('fixedHeader-floating');\n                }\n                // Otherwise max-width has kicked in so it is not floating\n                else {\n                    $(this.dom.tfoot.parent()).removeClass('fixedHeader-floating');\n                }\n            }\n        }\n\n        if (this.dom.header.floating) {\n            this.dom.header.floatingParent.css('left', bodyLeft - windowLeft);\n        }\n        if (this.dom.footer.floating) {\n            this.dom.footer.floatingParent.css('left', bodyLeft - windowLeft);\n        }\n\n        // If fixed columns is being used on this table then the blockers need to be copied across\n        // Cloning these is cleaner than creating as our own as it will keep consistency with fixedColumns automatically\n        // ASSUMING that the class remains the same\n        if (this.s.dt.settings()[0]._fixedColumns !== undefined) {\n            var adjustBlocker = function(side, end, el) {\n                if (el === undefined) {\n                    var blocker = $('div.dtfc-' + side + '-' + end + '-blocker');\n\n                    el = blocker.length === 0 ? null : blocker.clone().css('z-index', 1);\n                }\n\n                if (el !== null) {\n                    if (headerMode === 'in' || headerMode === 'below') {\n                        el.appendTo('body').css({\n                            top: end === 'top' ? header.offset.top : footer.offset.top,\n                            left: side === 'right' ? bodyLeft + bodyWidth - el.width() : bodyLeft\n                        });\n                    } else {\n                        el.detach();\n                    }\n                }\n\n                return el;\n            };\n\n            // Adjust all blockers\n            this.dom.header.rightBlocker = adjustBlocker(\n                'right',\n                'top',\n                this.dom.header.rightBlocker\n            );\n            this.dom.header.leftBlocker = adjustBlocker('left', 'top', this.dom.header.leftBlocker);\n            this.dom.footer.rightBlocker = adjustBlocker(\n                'right',\n                'bottom',\n                this.dom.footer.rightBlocker\n            );\n            this.dom.footer.leftBlocker = adjustBlocker(\n                'left',\n                'bottom',\n                this.dom.footer.leftBlocker\n            );\n        }\n    },\n\n    /**\n     * Function to check if scrolling is enabled on the table or not\n     * @returns Boolean value indicating if scrolling on the table is enabled or not\n     */\n    _scrollEnabled: function() {\n        var oScroll = this.s.dt.settings()[0].oScroll;\n        if (oScroll.sY !== '' || oScroll.sX !== '') {\n            return true;\n        }\n        return false;\n    }\n});\n\n/**\n * Version\n * @type {String}\n * @static\n */\nFixedHeader.version = '3.4.0';\n\n/**\n * Defaults\n * @type {Object}\n * @static\n */\nFixedHeader.defaults = {\n    header: true,\n    footer: false,\n    headerOffset: 0,\n    footerOffset: 0\n};\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables interfaces\n */\n\n// Attach for constructor access\n$.fn.dataTable.FixedHeader = FixedHeader;\n$.fn.DataTable.FixedHeader = FixedHeader;\n\n// DataTables creation - check if the FixedHeader option has been defined on the\n// table and if so, initialise\n$(document).on('init.dt.dtfh', function(e, settings) {\n    if (e.namespace !== 'dt') {\n        return;\n    }\n\n    var init = settings.oInit.fixedHeader;\n    var defaults = DataTable.defaults.fixedHeader;\n\n    if ((init || defaults) && !settings._fixedHeader) {\n        var opts = $.extend({}, defaults, init);\n\n        if (init !== false) {\n            new FixedHeader(settings, opts);\n        }\n    }\n});\n\n// DataTables API methods\nDataTable.Api.register('fixedHeader()', function() {});\n\nDataTable.Api.register('fixedHeader.adjust()', function() {\n    return this.iterator('table', function(ctx) {\n        var fh = ctx._fixedHeader;\n\n        if (fh) {\n            fh.update();\n        }\n    });\n});\n\nDataTable.Api.register('fixedHeader.enable()', function(flag) {\n    return this.iterator('table', function(ctx) {\n        var fh = ctx._fixedHeader;\n\n        flag = flag !== undefined ? flag : true;\n        if (fh && flag !== fh.enabled()) {\n            fh.enable(flag);\n        }\n    });\n});\n\nDataTable.Api.register('fixedHeader.enabled()', function() {\n    if (this.context.length) {\n        var fh = this.context[0]._fixedHeader;\n\n        if (fh) {\n            return fh.enabled();\n        }\n    }\n\n    return false;\n});\n\nDataTable.Api.register('fixedHeader.disable()', function() {\n    return this.iterator('table', function(ctx) {\n        var fh = ctx._fixedHeader;\n\n        if (fh && fh.enabled()) {\n            fh.enable(false);\n        }\n    });\n});\n\n$.each(['header', 'footer'], function(i, el) {\n    DataTable.Api.register('fixedHeader.' + el + 'Offset()', function(offset) {\n        var ctx = this.context;\n\n        if (offset === undefined) {\n            return ctx.length && ctx[0]._fixedHeader\n                ? ctx[0]._fixedHeader[el + 'Offset']()\n                : undefined;\n        }\n\n        return this.iterator('table', function(ctx) {\n            var fh = ctx._fixedHeader;\n\n            if (fh) {\n                fh[el + 'Offset'](offset);\n            }\n        });\n    });\n});\n\n\nreturn DataTable;\n}));"],"names":["factory","define","amd","$","window","document","exports","jq","require","cjsRequires","root","fn","dataTable","module","jQuery","undefined","DataTable","_instCounter","FixedHeader","dt","config","this","Api","c","extend","defaults","s","position","theadTop","tbodyTop","tfootTop","tfootBottom","width","left","tfootHeight","theadHeight","windowHeight","height","visible","headerMode","footerMode","autoWidth","settings","oFeatures","bAutoWidth","namespace","scrollLeft","header","footer","enable","autoDisable","dom","floatingHeader","thead","table","tbody","body","tfoot","host","floating","floatingParent","placeholder","parent","dtSettings","_fixedHeader","nTable","id","_constructor","prototype","destroy","off","rightBlocker","remove","leftBlocker","_modeChange","length","update","type","enableType","_positions","_scroll","enabled","headerOffset","offset","footerOffset","force","node","is","children","that","on","util","throttle","autoHeader","outerHeight","autoFooter","e","ctx","_clone","item","itemDom","itemElement","_scrollEnabled","removeClass","_unsize","detach","tableNode","scrollBody","scrollEnabled","cloneNode","attr","css","top","removeAttr","append","overflow","bottom","addClass","appendTo","_stickyPosition","scrollLeftUpdate","clone","find","prepend","_matchWidths","el","sign","rtl","each","right","potential","replace","oBrowser","barWidth","from","to","get","name","map","toArray","set","toWidths","i","minWidth","thWidths","tdWidths","_horizontal","lastScrollLeft","newScrollLeft","mode","forceChange","importantWidth","w","tablePart","focus","contains","activeElement","scrollOffset","windowTop","scrollTop","windowBottom","bodyTop","bodyBottom","shuffle","prop","val","setTimeout","outerWidth","tbodyHeight","theadBottom","bDestroying","scrollHeight","windowLeft","bodyLeft","bodyWidth","tbodyWidth","getOffsetHeight","overlap","newHeight","Math","round","_fixedColumns","adjustBlocker","side","end","blocker","oScroll","sY","sX","version","init","oInit","fixedHeader","opts","register","iterator","fh","flag","context"],"mappings":"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"}